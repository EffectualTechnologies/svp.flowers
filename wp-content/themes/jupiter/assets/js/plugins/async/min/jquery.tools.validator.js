!function(e){function t(a,b,c){var k=a.offset().top,f=a.offset().left,l=c.position.split(/,?\s+/),p=l[0];return l=l[1],k-=b.outerHeight()-c.offset[0],f+=a.outerWidth()+c.offset[1],/iPad/i.test(navigator.userAgent)&&(k-=e(window).scrollTop()),c=b.outerHeight()+a.outerHeight(),"center"==p&&(k+=c/2),"bottom"==p&&(k+=c),a=a.outerWidth(),"center"==l&&(f-=(a+b.outerWidth())/2),"left"==l&&(f-=a),{top:k,left:f}}function y(a){function b(){return this.getAttribute("type")==a}return b.key="[type="+a+"]",b}function u(a,b,c){function k(g,d,i){if(c.grouped||!g.length){var j;i===!1||e.isArray(i)?(j=h.messages[d.key||d]||h.messages["*"],j=j[c.lang]||h.messages["*"].en,(d=j.match(/\$\d/g))&&e.isArray(i)&&e.each(d,function(m){j=j.replace(this,i[m])})):j=i[c.lang]||i,g.push(j)}}var f=this,l=b.add(f);a=a.not(":button, :image, :reset, :submit"),e.extend(f,{getConf:function(){return c},getForm:function(){return b},getInputs:function(){return a},reflow:function(){return a.each(function(){var g=e(this),d=g.data("msg.el");d&&(g=t(g,d,c),d.css({top:g.top,left:g.left}))}),f},invalidate:function(g,d){if(!d){var i=[];e.each(g,function(j,m){j=a.filter("[name='"+j+"']"),j.length&&(j.trigger("OI",[m]),i.push({input:j,messages:[m]}))}),g=i,d=e.Event()}return d.type="onFail",l.trigger(d,[g]),d.isDefaultPrevented()||q[c.effect][0].call(f,g,d),f},reset:function(g){return g=g||a,g.removeClass(c.errorClass).each(function(){var d=e(this).data("msg.el");d&&(d.remove(),e(this).data("msg.el",null))}).unbind(c.errorInputEvent||""),f},destroy:function(){return b.unbind(c.formEvent+".V").unbind("reset.V"),a.unbind(c.inputEvent+".V").unbind("change.V"),f.reset()},checkValidity:function(g,d){if(g=g||a,g=g.not(":disabled"),!g.length)return!0;if(d=d||e.Event(),d.type="onBeforeValidate",l.trigger(d,[g]),d.isDefaultPrevented())return d.result;var i=[];g.not(":radio:not(:checked)").each(function(){var m=[],n=e(this).data("messages",m),v=r&&n.is(":date")?"onHide.v":c.errorInputEvent+".v";return n.unbind(v),e.each(w,function(){var o=this,s=o[0];if(n.filter(s).length&&(o=o[1].call(f,n,n.val()),o!==!0)){if(d.type="onBeforeFail",l.trigger(d,[n,s]),d.isDefaultPrevented())return!1;var x=n.attr(c.messageAttr);if(x)return m=[x],!1;k(m,s,o)}}),m.length&&(i.push({input:n,messages:m}),n.trigger("OI",[m]),c.errorInputEvent&&n.bind(v,function(o){f.checkValidity(n,o)})),c.singleError&&i.length?!1:void 0});var j=q[c.effect];if(!j)throw'Validator: cannot find effect "'+c.effect+'"';return i.length?(f.invalidate(i,d),!1):(j[1].call(f,g,d),d.type="onSuccess",l.trigger(d,[g]),g.unbind(c.errorInputEvent+".v"),!0)}}),e.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(g,d){e.isFunction(c[d])&&e(f).bind(d,c[d]),f[d]=function(i){return i&&e(f).bind(d,i),f}}),c.formEvent&&b.bind(c.formEvent+".V",function(g){return f.checkValidity(null,g)?void 0:g.preventDefault()}),b.bind("reset.V",function(){f.reset()}),a[0]&&a[0].validity&&a.each(function(){this.oninvalid=function(){return!1}}),b[0]&&(b[0].checkValidity=f.checkValidity),c.inputEvent&&a.bind(c.inputEvent+".V",function(g){f.checkValidity(e(this),g)}),a.filter(":checkbox, select").filter("[required]").bind("change.V",function(g){var d=e(this);(this.checked||d.is("select")&&e(this).val())&&q[c.effect][1].call(f,d,g)});var p=a.filter(":radio").change(function(g){f.checkValidity(p,g)});e(window).resize(function(){f.reflow()})}e.tools=e.tools||{version:"1.2.5"};var h,z=/\[type=([a-z]+)\]/,A=/^-?[0-9]*(\.[0-9]+)?$/,r=e.tools.dateinput,B=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,C=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i;h=e.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(a,b){e.each(b,function(c,k){h.messages[c]=h.messages[c]||{},h.messages[c][a]=k})},localizeFn:function(a,b){h.messages[a]=h.messages[a]||{},e.extend(h.messages[a],b)},fn:function(a,b,c){e.isFunction(b)?c=b:("string"==typeof b&&(b={en:b}),this.messages[a.key||a]=b),(b=z.exec(a))&&(a=y(b[1])),w.push([a,c])},addEffect:function(a,b,c){q[a]=[b,c]}};var w=[],q={"default":[function(a){var b=this.getConf();e.each(a,function(c,k){c=k.input,c.addClass(b.errorClass);var f=c.data("msg.el");f||(f=e(b.message).addClass(b.messageClass).appendTo(document.body),c.data("msg.el",f)),f.css({visibility:"hidden"}).find("p").remove(),e.each(k.messages,function(l,p){e("<p/>").html(p).appendTo(f)}),f.outerWidth()==f.parent().width()&&f.add(f.find("p")).css({display:"inline"}),k=t(c,f,b),f.css({visibility:"visible",position:"absolute",top:k.top,left:k.left}).fadeIn(b.speed)})},function(a){var b=this.getConf();a.removeClass(b.errorClass).each(function(){var c=e(this).data("msg.el");c&&c.css({visibility:"hidden"})})}]};e.each("email,url,number".split(","),function(a,b){e.expr[":"][b]=function(c){return c.getAttribute("type")===b}}),e.fn.oninvalid=function(a){return this[a?"bind":"trigger"]("OI",a)},h.fn(":email","Please enter a valid email address",function(a,b){return!b||B.test(b)}),h.fn(":url","Please enter a valid URL",function(a,b){return!b||C.test(b)}),h.fn(":number","Please enter a numeric value.",function(a,b){return A.test(b)}),h.fn("[max]","Please enter a value smaller than $1",function(a,b){return""===b||r&&a.is(":date")?!0:(a=a.attr("max"),parseFloat(b)<=parseFloat(a)?!0:[a])}),h.fn("[min]","Please enter a value larger than $1",function(a,b){return""===b||r&&a.is(":date")?!0:(a=a.attr("min"),parseFloat(b)>=parseFloat(a)?!0:[a])}),h.fn("[required]","Please complete this mandatory field.",function(a,b){return a.is(":checkbox")?a.is(":checked"):!!b}),h.fn("[pattern]",function(a){var b=new RegExp("^"+a.attr("pattern")+"$");return b.test(a.val())}),e.fn.validator=function(a){var b=this.data("validator");return b&&(b.destroy(),this.removeData("validator")),a=e.extend(!0,{},h.conf,a),this.is("form")?this.each(function(){var c=e(this);b=new u(c.find(":input"),c,a),c.data("validator",b)}):(b=new u(this,this.eq(0).closest("form"),a),this.data("validator",b))}}(jQuery);