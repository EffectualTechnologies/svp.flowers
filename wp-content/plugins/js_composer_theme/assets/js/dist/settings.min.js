if(!window.vc)var vc={};if(function(){vc.templateOptions={"default":{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var e=/(.)^/,t={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\u2028|\u2029/g,i=function(e){return"\\"+t[e]};vc.template=function(t,n){n=_.defaults({},n,vc.templateOptions["default"]);var r=RegExp([(n.escape||e).source,(n.interpolate||e).source,(n.evaluate||e).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,r,c,d){return o+=t.slice(s,d).replace(a,i),s=d+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":c&&(o+="';\n"+c+"\n__p+='"),e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var c;try{c=new Function(n.variable||"obj","_",o)}catch(d){throw d.source=o,d}
var l=function(e){return c.call(this,e,_)},v=n.variable||"obj";return l.source="function("+v+"){\n"+o+"}",l}}(),function(e){"use strict";_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"wpb_csseditor",ace_enabled:!1,initialize:function(e){e&&0<e.length&&(this.sel=e),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(e){return this.aceEnabled()?this.setEditorAce(e):this.setEditorTextarea(e),this.$editor},focus:function(){if(this.aceEnabled()){this.$editor.focus();var e=this.$editor.session.getLength();this.$editor.gotoLine(e,this.$editor.session.getLine(e-1).length)}else this.$editor.focus()},setEditorAce:function(e){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/css"),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(e),this.$editor.clearSelection(),this.$editor.focus();var t=this.$editor.getSession().getLength();return this.$editor.gotoLine(t,this.$editor.getSession().getLine(t-1).length),this.$editor},setEditorTextarea:function(t){return this.$editor||(this.$editor=e("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),e("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(t),this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var t=e(window).height()-380;this.aceEnabled()?e("#"+this.sel).css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var t,a,i,n=e("#"+this.sel);a=n.offset().top,i=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top,t=i-a-70,this.aceEnabled()?n.css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(e){"use strict";e(function(){var t=e('[data-vc-roles="form"]');e('[data-vc-roles="part-state"]').click(function(){var t=e(this);t.data("vcCustomSelector",t.find(":selected").data("vcCustomSelector")||"")}).change(function(){var t,a,i,n,r;return n=e(this),a=n.data("vcRolePart"),i=e('[data-vc-role-related-part="'+a+'"]'),"*"===i.data("vcRolePartState")?!1:(t=n.val(),r=n.data("vcCustomSelector")||"",void(i.data("vcRolePartState").toString()===t?(i.addClass("vc_visible"),r.length&&i.find(n.data("vcCustomSelector")).prop("checked",!0)):i.removeClass("vc_visible")))}),t.submit(function(a){var i,n={};a.preventDefault(),i=e("#submit_btn"),i.attr("disabled",!0),e("#vc_wp-spinner").show(),n.action=e("#vc_settings-roles-action").val(),n.vc_nonce_field=e("#vc_nonce_field").val(),n.vc_roles={},e("[data-vc-role]").each(function(){var t=e(this),a=t.data("vcRole"),i={};t.find("select").each(function(){var t=e(this),a=t.data("vcPart");void 0===i[a]&&(i[a]={}),i[a][t.data("vcName")]=t.val()}),t.find('[data-vc-role-related-part].vc_visible [data-vc-name][type="checkbox"]').each(function(){var t=e(this),a=t.data("vcPart");void 0===i[a]&&(i[a]={}),i[a][t.data("vcName")]=t.is(":checked")?t.val():"0"}),n.vc_roles[a]=JSON.stringify(i)}),e.ajax({url:t.attr("action"),type:"POST",dataType:"json",data:n,context:this}).done(function(t){var a;e("#vc_wp-spinner").hide(),t.message&&(a=e('<div id="vc_roles-message" class="updated vc_updater-result-message hidden"><p><strong></strong></p></div>'),a.find("strong").text(t.message),a.insertBefore(i).fadeIn(100),window.setTimeout(function(){a.slideUp(100,function(){e(this).remove(),i.attr("disabled",!1)})},2e3))})})}),e("[data-vc-accordion]").on("show.vc.accordion",function(){e(this).addClass("vc_opened")}).on("hide.vc.accordion",function(){e(this).removeClass("vc_opened")}),e('[data-vc-ui-element="panel-tab-control"]').click(function(t){var a,i=e(this),n=i.parents("fieldset").first(),r=".vc_wp-form-table";t.preventDefault(),e('[data-vc-ui-element="panel-tabs-controls"] .vc_active',n).removeClass("vc_active"),i.parent().addClass("vc_active"),a=i.data("filter"),n.attr("data-vc-roles-filter-value",a),r+=" "+a,e(".vc_wp-form-table [data-vc-capability]",n).addClass("vc_hidden"),e(r,n).removeClass("vc_hidden")}),e('[data-vc-roles="table-checkbox"]').change(function(){var t=e(this);t.is(":checked")?t.parents("tr:first").find('[data-vc-name!="'+t.attr("data-vc-name")+'"]:checked').prop("checked",!1):t.parents('[data-vc-roles="table"]').first().find('[data-vc-roles-select-all-checkbox="'+t.data("vcCap")+'"]').prop("checked",!1)}),e("[data-vc-roles-select-all-checkbox]").change(function(){var t,a,i,n,r;t=e(this),a=t.is(":checked"),i=t.parents('[data-vc-roles="table"]').first(),n=i.find(t.data("vcRelatedControls")),r=t.data("vcRolesSelectAllCheckbox"),i.find('[data-vc-cap="'+r+'"]:visible').prop("checked",a),n.prop("checked",a),a&&_.defer(function(){i.find("[data-vc-roles-select-all-checkbox!="+r+"]:not([data-vc-cap])").prop("checked",!1),i.find('[data-vc-cap!="'+r+'"]:not([data-vc-roles-select-all-checkbox]):visible').prop("checked",!1)})}),e('[data-vc-role-related-part].vc_visible [data-vc-roles="table"]').each(function(){var t=e(this);t.find("thead [data-vc-roles-select-all-checkbox]").each(function(){var a=e(this),i=a.data("vcRolesSelectAllCheckbox");t.find('[data-vc-cap="'+i+'"]:not(:checked)').length||(a.prop("checked",!0),t.find('tfoot [data-vc-roles-select-all-checkbox="'+i+'"]').prop("checked",!0))})})}(window.jQuery),_.isUndefined(window.vc))var vc={};jQuery(document).ready(function(e){"use strict";_.isUndefined(window.less)||(vc.less={},vc.less.options={relativeUrls:!1,rootpath:!1},less.options.env=vcData.debug?"development":"production",less.options.logLevel=vcData.debug?4:0,vc.less.generateLessFormData=function(e,t){var a={};return _.isEmpty(t)||_.each(t,function(t,i){var n,r;_.isString(t)?(n=_.first(_.where(e,{name:t})),_.isObject(n)&&(r=n.value,0<r.length&&(a[i]=r))):_.isObject(t)&&!_.isUndefined(t.key)&&(n=_.first(_.where(e,{name:t.key})),_.isObject(n)||_.isUndefined(t.default_key)?_.isObject(n)||_.isUndefined(t["default"])||(n={value:t["default"]}):n=_.isUndefined(a[t.default_key])?_.first(_.where(e,{name:t.default_key})):{value:a[t.default_key]},_.isObject(n)&&(r=n.value,_.isUndefined(t.modify_output)||!_.isObject(t.modify_output)||_.isEmpty(t.modify_output)||_.each(t.modify_output,function(e){_.isUndefined(e.plain)||!_.isObject(e.plain)||_.isEmpty(e.plain)||_.each(e.plain,function(e){var t;t=e.replace("{{ value }}",r),r=t}),_.isUndefined(e.js_function)||!_.isObject(e.js_function)||_.isEmpty(e.js_function)||_.each(e.js_function,function(e){if(!_.isUndefined(e["function"])){var t,a;a=new Function("value","args",e["function"]),t=_.isUndefined(e.arguments)?a(r):a(r,e.arguments),r=t}})}),r&&0<r.length&&(a[i]=r)))}),a},vc.less.fileManager=less.FileManager.prototype.extractUrlParts,less.FileManager.prototype.extractUrlParts=function(e,t){var a;return e+="?v="+(window.vcData&&window.vcData.version?window.vcData.version:"4.5"),a=vc.less.fileManager(e,t)},vc.less.build=function(e,t){var a;this.options=_.extend({},{modifyVars:{},variablesDataLinker:{},lessPath:""},this.options,e),this.options.modifyVars=this.generateLessFormData(this.options.modifyVars,this.options.variablesDataLinker),a=this,_.defer(function(){less.render('@import "'+a.options.lessPath+'";',a.options).then(function(e){t&&t.call(a,e)},function(e){t&&t.call(a,void 0,e)})})})});var vc_am={current_form:!1};window.i18nLocaleVcAutomapper=window.i18nLocaleSettings,function(e){"use strict";function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}
function a(t,a){r&&(window.clearTimeout(r),e(".vc_settings-automapper").remove(),r=!1);var i=e('<div class="vc_atm-message updated'+(a?" vc_message-"+a:"")+'" style="display: none;"></div>');i.text(t),i.prependTo(e("#vc_settings-automapper")).fadeIn(500,function(){var t=e(this);window.setTimeout(function(){t.remove()},2e3)})}
function i(t,a,i,n){n&&e(".vc_atm-message").remove();var r=e('<div class="vc_atm-message '+(a?a:"")+'" style="display: none;"></div>');return r.text(t),_.isUndefined(i)||window.setTimeout(function(){r.remove()},i),r}
function n(t,a){(_.isUndefined(a)||!a.length)&&(a=e(".tab_intro")),i(t,"error",void 0,!0).insertBefore(a).fadeIn(500)}
vc_am.vcGuid=function(){return t()+t()+"-"+t()},_.extend(wp.shortcode.prototype,{taggedString:function(){var e='[<span class="vc_preview-tag">'+this.tag+"</span>";return _.each(this.attrs.numeric,function(t){e+=/\s/.test(t)?' <span class="vc_preview-param">"'+t+'"</span>':' <span class="vc_preview-param">'+t+"</span>"}),_.each(this.attrs.named,function(t,a){e+=' <span class="vc_preview-param">'+a+'="'+t+'"</span>'}),"single"===this.type?e+"]":"self-closing"===this.type?e+" /]":(e+="]",this.content&&(e+='<span class="vc_preview-content">'+this.content+"</span>"),e+'[/<span class="vc_preview-tag">'+this.tag+"</span>]")}}),wp.shortcode.atmPreview=function(e){return new wp.shortcode(e).taggedString()};var r,s;s=function(e){return e=e.replace(/_|-/," "),e.charAt(0).toUpperCase()+e.slice(1)};var o=window.ajaxurl+"?vc_action=automapper",c=function(t,a,i){var n;"create"===t?(a.set("id",vc_am.vcGuid()),n={vc_action:"create",data:a.toJSON()}):n="update"===t?{vc_action:"update",id:a.get("id"),data:a.toJSON()}:"delete"===t?{vc_action:"delete",id:a.get("id")}:{vc_action:"read"},e.ajax({method:"POST",url:o,dataType:"json",data:_.extend(n,{action:"vc_automapper",_vcnonce:window.vcAdminNonce}),context:this}).done(function(e){var n=a;e&&"read"===t&&(n=e),n?"read"===t&&i.success(n):i.error("Not found")}).error(function(e){})},d=Backbone.Model.extend({defaults:function(){return{tag:"",name:"",category:"",description:"",params:[]}},sync:c}),l=Backbone.Collection.extend({model:d,sync:c});vc_am.shortcodes=new l;var v=(Backbone.View.extend({tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, widget-action":"edit","click .vc_automapper-delete-btn":"clear"},template_html:e("#vc_automapper-item-tpl").html()||"<span>{{ tag }}</span>",initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.removeView)},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},edit:function(e){e&&e.preventDefault(),new u({model:this.model}).render()},clear:function(e){e&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&this.model.destroy()},removeView:function(){this.$el.remove()}}),Backbone.View.extend({render:function(){return vc_am.current_form&&vc_am.current_form.close(),vc_am.current_form=this,this},getType:function(){return"form"},validate:function(e){var t=!1;if(!e.name)return window.i18nLocaleVcAutomapper.error_shortcode_name_is_required;if(!e.tag||!e.tag.match(/^\S+$/))return window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag;var a=["param_name","heading","type"];return _.each(e.params,function(e){_.each(a,function(a){""===e[a]?t=window.i18nLocaleVcAutomapper.error_enter_required_fields:"param_name"!==a||e[a].match(/^[a-z0-9_]+$/g)||(t=window.i18nLocaleVcAutomapper.error_enter_required_fields)},this)},this),t||null},isValid:function(e){return this.validationError=this.validate(e),this.validationError?!1:!0},close:function(e){e&&e.preventDefault(),vc_am.current_form=!1,this.remove()}})),m=Backbone.View.extend({_$widget_title:!1,_$form_view:!1,edit_view:!1,tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, .widget-action":"edit"},template_html:e("#vc_automapper-item-complex-tpl").html()||"<span>{{ tag }}</span>",header_template_html:'<h4>{{ name }}<span class="in-widget-title"></span></h4>',initialize:function(){_.bindAll(this,"removeEditForm"),this.listenTo(this.model,"destroy",this.removeView),this.model.view=this},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},renderTitle:function(){var e=vc.template(this.header_template_html,vc.templateOptions.custom);this.$widgetTitle().html(e(this.model.toJSON()))},edit:function(e){return e&&e.preventDefault(),this.$editForm().is(":animated")?!1:(this.$el.addClass("vc_opened"),void(this.edit_view?this.close():this.edit_view=new h({model:this.model}).render()))},$widgetTitle:function(){return this._$widget_title||(this._$widget_title=this.$el.find(".widget-title")),this._$widget_title},$editForm:function(){return this._$edit_form||(this._$edit_form=this.$el.find(".widget-inside")),this._$edit_form},removeEditForm:function(){this.edit_view&&this.edit_view.remove(),this.edit_view=!1},beforeSave:function(){this.$el.find("#vc_atm-name").val(e("#vc_atm-header-name").val())},close:function(){vc_am.current_form=!1,this.$el.removeClass("vc_opened"),this.renderTitle(),this.$editForm().slideUp(200),this.removeEditForm()},clear:function(e){e&&e.preventDefault(),this.model.destroy()},removeView:function(){this.remove()}}),p=v.extend({className:"vc_add-form-atm",template_html:e("#vc_automapper-add-form-tpl").html(),events:{"click #vc_atm-parse-string":"parseShortcode","click .vc_atm-cancel":"close"},getType:function(){return"create"},render:function(){p.__super__.render.call(this);var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e()),this.$el.insertAfter(".vc_automapper-toolbar"),this},shortcodesRegexp:_.memoize(function(){return RegExp("\\[(\\[?)(\\w+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")}),parseShortcode:function(t){var i,r,o,c,d=[];return t&&t.preventDefault&&t.preventDefault(),i=e("#vc_atm-shortcode-string").val(),_.isEmpty(i)?(this.$el.addClass("form-invalid"),n(window.i18nLocaleVcAutomapper.error_enter_valid_shortcode,this.$el),!1):(r=i.match(this.shortcodesRegexp()))?(c=wp.shortcode.attrs(r[3]),_.each(c.named,function(e,t){d.push({param_name:t,type:"textfield",heading:s(t),description:"Example: "+e,value:e})},this),r[5]&&d.push({param_name:"content",type:"textarea",heading:"Content",description:"",value:r[5]}),o={tag:r[2],name:s(r[2]),category:window.i18nLocaleVcAutomapper.my_shortcodes_category,params:d},void(this.isValid(o)?(vc_am.shortcodes.create(o),a(window.i18nLocaleVcAutomapper.new_shortcode_mapped,"success"),e(".vc_atm-message").remove(),vc_am.shortcodes.last().view.edit()):(this.$el.addClass("form-invalid"),n(this.validationError)))):(this.$el.addClass("form-invalid"),n(window.i18nLocaleVcAutomapper.error_enter_valid_shortcode,this.$el),!1)}}),u=v.extend({className:"vc_edit-form",active_preview:!1,events:{"click #vc_atm-save":"save","click .vc_atm-cancel":"close","click .vc_atm-delete":"clear","click #vc_atm-add-param":"addParam","click .vc_delete-param":"deleteParam","change #vc_atm-is-container":"setContentParam","keyup .vc_param-name, .vc_param-value, #vc_atm-tag":"setPreview","focus #vc_atm-tag":"setTagFieldActive","focus .vc_params input, .vc_params textarea":"setParamFieldActive","focus .vc_param.vc_content input, .vc_param.vc_content textarea":"setContentParamFieldActive","blur #vc_atm-tag, vc_param input":"unsetFieldActive",'change .vc_param-field [name="type"]':"changeParamType"},"new":!1,template_html:e("#vc_automapper-form-tpl").html(),param_template_html:e("#vc_atm-form-param-tpl").html(),getType:function(){return"edit"},render:function(){u.__super__.render.call(this);var t=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(t(this.model.toJSON())),this.$el.insertAfter(e("[data-item-id="+this.model.id+"]").hide()),this.addAllParams(),this},changeParamType:function(t){var a,i;a=e(t.currentTarget),i=a.parents(".vc_fields"),"hidden"===a.val()?(i.find('[name="heading"]').attr("disabled",!0),i.find('[name="description"]').attr("disabled",!0)):(i.find('[name="heading"]').attr("disabled",!1),i.find('[name="description"]').attr("disabled",!1))},setTagFieldActive:function(t){this.active_preview&&e(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-tag",e(this.active_preview).addClass("vc_active")},setParamFieldActive:function(t){var a=e(t.currentTarget),i=a.parents(".vc_param:first").index();this.active_preview&&e(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-param:eq("+i+")",e(this.active_preview).addClass("vc_active")},setContentParamFieldActive:function(t){this.active_preview&&e(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-content",e(this.active_preview).addClass("vc_active")},unsetFieldActive:function(t){e(this.active_preview).removeClass("vc_active"),this.active_preview=!1},escapeParam:function(e){return e&&e.replace(/"/g,"``")},getPreview:function(e){var t=e.params,a=!1,i={};return _.each(t,function(e,t){"content"!==e.param_name?i[e.param_name]=this.escapeParam(e.value):a=e.value},this),wp.shortcode.atmPreview({tag:e.tag,attrs:i,content:a,type:!1===a?"single":""})},setPreview:function(){var t={params:this.getParams(),tag:e("#vc_atm-tag").val()};e("#vc_shortcode-preview").html(this.getPreview(t)),this.active_preview&&e(this.active_preview).addClass("vc_active")},save:function(t){t&&t.preventDefault&&t.preventDefault(),this.$el.find(".vc_error").removeClass("vc_error");var i={tag:e("#vc_atm-tag").val(),name:e("#vc_atm-name").val(),category:e("#vc_atm-category").val(),description:e("#vc_atm-description").val(),params:this.getParams()};this.isValid(i)?(this.model.save(i),a(window.i18nLocaleVcAutomapper.shortcode_updated,"success"),this.close()):n(this.validationError,this.$el.find("#vc_atm-save"))},validate:function(t){e(".vc_error,.form-invalid").removeClass("vc_error form-invalid");var a=!1,i={};if(!t.name)return e("#vc_atm-name").addClass("vc_error"),e("#vc_atm-header-name").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_shortcode_name_is_required;if(!t.tag||!t.tag.match(/^\S+$/))return e("#vc_atm-tag").addClass("vc_error").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag;var n=["param_name","heading","type"];return _.each(t.params,function(t,r){var s=e("#vc_atm-params-list [name=param_name]:eq("+r+")");return"content"!==t.param_name||s.data("system")?(_.isBoolean(i[t.param_name])&&1==i[t.param_name]&&(s.addClass("vc_error"),s.closest(".vc_param-field").addClass("form-invalid"),a||(a=window.i18nLocaleVcAutomapper.error_param_already_exists.replace(/\%s/,t.param_name))),i[t.param_name]=!0,void _.each(n,function(i){"hidden"!==t.type&&""===t[i]||"hidden"===t.type&&"heading"!==i&&""===t[i]?(e("#vc_atm-params-list [name="+i+"]:eq("+r+")").addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),a||(a=window.i18nLocaleVcAutomapper.error_enter_required_fields)):"param_name"!==i||t[i].match(/^[a-z0-9_]+$/g)||(s.addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),a||(a=window.i18nLocaleVcAutomapper.error_wrong_param_name))},this)):(a=window.i18nLocaleVcAutomapper.error_content_param_not_manually,s.addClass("vc_error"),void s.closest(".vc_param-field").addClass("form-invalid"))},this),a||null},setContentParam:function(t){var a=e(t.currentTarget);a[0].checked?(this.addParamField({type:"textarea",heading:"Content",description:"",param_name:"content",value:""}),this.setParamSorting()):this.removeParamField("content"),this.setPreview()},addAllParams:function(){e("#vc_atm-params-list").empty(),_.each(this.model.get("params"),function(t){this.addParamField(t),"content"===t.param_name&&e("#vc_atm-is-container").prop("checked",!0)},this),this.setParamSorting()},getParams:function(){var t=[];return _.each(e(".vc_param"),function(a){var i=e(a);t.push({param_name:i.find("[name=param_name]").val(),type:i.find("[name=type]").val(),description:i.find("[name=description]").val(),heading:i.find("[name=heading]").val(),value:i.find("[name=value]").val()})},this),t},addParam:function(e){e&&e.preventDefault(),this.addParamField({type:"",heading:"",description:"",param_name:"",value:""}),this.setPreview()},removeParamField:function(t){e('.vc_param-name[value="'+t+'"]').parents(".vc_param").remove()},addParamField:function(t){var a=e('<div class="vc_param wpb_vc_row'+("content"===t.param_name?" vc_content":"")+'"/>').appendTo("#vc_atm-params-list"),i=vc.template(this.param_template_html,vc.templateOptions.custom);a.html(i(t))},setParamSorting:function(){e("#vc_atm-params-list").sortable({items:"> .vc_param",tolerance:"pointer",handle:".vc_move-param",update:this.setPreview,placeholder:"vc_sortable-placeholder"})},deleteParam:function(t){var a;t&&t.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete_param)&&(a=e(t.currentTarget),a.parents(".vc_param").remove(),this.setPreview())},close:function(t){t&&t.preventDefault(),this.model&&e("[data-item-id="+this.model.get("id")+"]").show(),vc_am.current_form=!1,e(".vc_atm-message").remove(),this.remove()},clear:function(e){e&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.destroy(),this.close())}}),h=u.extend({template_html:e("#vc_automapper-form-tpl").html(),getType:function(){return"edit"},initialize:function(){_.bindAll(this,"setPreview")},render:function(){var t,a=this.model.view;t=this.model.get("params"),u.__super__.render.call(this);var i=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(i(_.extend({shortcode_preview:this.getPreview(this.model.toJSON())},this.model.toJSON()))),this.$el.appendTo(a.$editForm()),a.$widgetTitle().html('<span class="vc_atm-header"><input type="text" name="name" value="" id="vc_atm-header-name" class="vc_header-name"></span><span class="in-widget-title"></span>'),e("#vc_atm-header-name").val(this.model.get("name")),this.addAllParams(),a.$editForm().slideDown(),this},save:function(e){e&&e.preventDefault(),this.model.view.beforeSave(),h.__super__.save.call(this)},close:function(e){e&&e.preventDefault(),vc_am.current_form=!1,this.model.view.close()},clear:function(e){e&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.view.clear(),this.remove())}}),f=Backbone.View.extend({events:{"click #vc_automapper-add-btn":"create",submit:"formSubmit"},className:"vc_atm-form",addFormView:!1,initialize:function(){this.listenTo(vc_am.shortcodes,"add",this.addOne),this.listenTo(vc_am.shortcodes,"reset",this.addAll),this.listenTo(vc_am.shortcodes,"all",this.render),this.$list=e(".vc_automapper-list"),vc_am.shortcodes.fetch()},formSubmit:function(t){if(t&&t.preventDefault&&t.preventDefault(),_.isObject(t)&&this.addFormView&&!_.isEmpty(t.currentTarget)&&!_.isEmpty(t.currentTarget[0])){var a,i;a=t.currentTarget[0],i=e(a),i.is("#vc_atm-shortcode-string")&&this.addFormView.parseShortcode()}},addAll:function(e){e.each(function(e){this.addOne(e)},this)},addOne:function(e){var t=new m({model:e});this.$list.append(t.render().el)},create:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form&&"create"===vc_am.current_form.getType()||(this.addFormView=(new p).render())},render:function(){}});new f({el:e("#vc_settings-automapper")})}(window.jQuery),jQuery(document).ready(function(e){function t(e,t,a){var i=new Date;i.setDate(i.getDate()+a);var n=encodeURIComponent(t)+(null===a?"":"; expires="+i.toUTCString());document.cookie=e+"="+n}
function a(e){var t,a,i,n=document.cookie.split(";");for(t=0;t<n.length;t++)
if(a=n[t].substr(0,n[t].indexOf("=")),i=n[t].substr(n[t].indexOf("=")+1),a=a.replace(/^\s+|\s+$/g,""),a==e)return decodeURIComponent(i)}
function i(t,a,i,n){n&&e(".vc_atm-message").remove();var r=e('<div class="vc_atm-message '+(a?a:"")+'" style="display: none;"><p></p></div>');return r.find("p").text(t),_.isUndefined(i)||window.setTimeout(function(){r.fadeOut(500,function(){e(this).remove()})},i),r}
e(".wpb_settings_accordion").accordion({active:a("wpb_js_composer_settings_group_tab")?a("wpb_js_composer_settings_group_tab"):!1,collapsible:!0,change:function(e,a){"undefined"!=typeof a.newHeader.attr("id")?t("wpb_js_composer_settings_group_tab","#"+a.newHeader.attr("id"),31536e3):t("wpb_js_composer_settings_group_tab","",31536e3)},heightStyle:"content"}),e(".wpb-settings-select-all-shortcodes").click(function(t){t.preventDefault(),e(this).parent().parent().find("[type=checkbox]").attr("checked",!0)}),e(".wpb-settings-select-none-shortcodes").click(function(t){t.preventDefault(),e(this).parent().parent().find("[type=checkbox]").removeAttr("checked")}),e(".vc_settings-tab-control").click(function(t){return t.preventDefault(),e(this).hasClass("nav-tab-active")?!1:(e(this).attr("href"),e(".vc_settings-tabs > .nav-tab-active").removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),void 0)}),e(".vc_settings-tab-content").submit(function(){return!0}),e(".vc_show_example").click(function(t){t.preventDefault();var a=e(".vc_helper");return a.is(":animated")?!1:void a.toggle(100)}),e(".color-control").wpColorPicker(),e("#vc_settings-color-restore-default").click(function(t){t.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_color)&&(e("#vc_settings-color-action").val("restore_color"),e("#vc_settings-color").attr("action",window.location.href).find("[type=submit]").click())}),e("#wpb_js_use_custom").change(function(){this.checked?e("#vc_settings-color").addClass("color_enabled"):e("#vc_settings-color").removeClass("color_enabled")}),e("#vc_settings-updater-button").click(function(t){var a=e(this),i=a.data("vcAction"),n=a.parent();return n.addClass("loading"),a.attr("disabled",!0),e.getJSON(window.ajaxurl,{action:"vc_get_"+i+"_url",_vcnonce:window.vcAdminNonce},function(e){e.status&&(window.location=e.url)}).error(function(){n.removeClass("loading"),a.removeAttr("disabled")}),t.preventDefault(),!1});var n=e("#wpb_csseditor"),r=e("textarea.custom_css.wpb_csseditor");n.length&&(window.css_editor=new Vc_postSettingsEditor,window.css_editor.setEditor(r.val()),window.css_editor.getEditor().on("change",function(){r.val(window.css_editor.getValue())})),e("#vc_settings-vc-pointers-reset").click(function(t){t.preventDefault(),e.post(window.ajaxurl,{action:"vc_pointer_reset",_vcnonce:window.vcAdminNonce}),e(this).text(e(this).data("vcDoneTxt"))});var s=!1;e("#vc_settings-color").submit(function(t){if(t.preventDefault(),!s){var a,n,r;if(a=this,n=e("#submit_btn"),r=e("#wpb_js_use_custom"),r.prop("checked")&&"restore_color"!==e("#vc_settings-color-action").val()){var o,c,d;s=!0,o=e(a).serializeArray(),c=n.data("vc-less-variables"),d=e('<span class="vc_settings-spinner vc_ui-wp-spinner"></span>'),n.val(window.i18nLocaleSettings.saving),d.insertBefore(n).show(),_.delay(function(){vc.less.build({modifyVars:o,variablesDataLinker:c,lessPath:n.data("vc-less-path"),rootpath:n.data("vc-less-root")},function(t,a){if(_.isUndefined(t)||_.isUndefined(t.css))_.isUndefined(a)||(window.console&&window.console.error&&window.console.error(a),i(window.i18nLocaleSettings.save_error+". "+a,"error",void 0,!0).insertBefore(n.parent()).fadeIn(500),n.val(window.i18nLocaleSettings.save),s=!1,d.remove());else{e('[name="wpb_js_compiled_js_composer_less"]').val(t.css);var r=e("#vc_settings-color");e.ajax({type:"POST",url:r.attr("action"),data:r.eq(0).serializeArray(),success:function(){i(window.i18nLocaleSettings.saved,"updated",5e3,!0).insertBefore(n.parent()).fadeIn(500),n.val(window.i18nLocaleSettings.save),s=!1,d.remove()},error:function(){i(window.i18nLocaleSettings.form_save_error,"error",void 0,!0).insertBefore(n.parent()).fadeIn(500),n.val(window.i18nLocaleSettings.save),s=!1,d.remove()}})}})},100)}else a.submit()}})});