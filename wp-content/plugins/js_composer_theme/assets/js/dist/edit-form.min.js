if(_.isUndefined(window.vc))var vc={atts:{}};if(function(e){var t=Backbone.View.extend({events:{},$lg_offset_placeholder_value:!1,$lg_size_placeholder_value:!1,initialize:function(){_.bindAll(this,"setLgPlaceholders")},render:function(){return this},save:function(){var t=[];return this.$el.find(".vc_column_offset_field").each(function(){var i=e(this);i.is(":checkbox:checked")?t.push(i.attr("name")):i.is("select")&&""!==i.val()&&t.push(i.val())}),t},setLgPlaceholders:function(){var e=this.$lg_offset_placeholder_value.val().replace(/[^\d]/g,"");this.$lg_size.find("option:first").text(VcI8nColumnOffsetParam.inherit_default),this.$lg_offset.find("option:first").text(e?VcI8nColumnOffsetParam.inherit+e:"")}});vc.atts.column_offset={parse:function(e){var t=this.content().find("input.wpb_vc_param_value."+e.param_name),i=t.data("vcColumnOffset"),a=i.save();return a.join(" ")},init:function(i,a){e('[data-column-offset="true"]',a).each(function(){var i=e(this),a=i.find(".wpb_vc_param_value");a.data("vcColumnOffset",new t({el:i}).render())})}}}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};if(function(e){function t(){var e={bg_color:"background-color",padding:"padding",margin_bottom:"margin-bottom",bg_image:"background-image"},t=vc.edit_element_block_view.model.get("params"),i=_.reduce(e,function(e,i,a){var n=t[a];return _.isUndefined(n)||!n.length?e:("bg_image"===a&&(n="url("+n+")"),e+i+": "+n+";")},"",this);return i?".tmp_class{"+i+"}":""}
function i(t,i){function n(a){if(!window.vc||!window.vc.active_panel)return!1;var n,r;n=_.map(a,function(e){return e.attributes}),t.reset(n),r=_.map(t.models,function(e){return e.attributes});var s=vc.template(e("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom));i._css_editor.$el.find(".vc_background-image .vc_image").html(s(r[0])),e(".media-modal").removeClass("processing-media")}
var r;r=[],e(".media-modal").addClass("processing-media"),t.each(function(e){r.push(e.get("id"))}),a(r,n)}
function a(t,i){e.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:t,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(t){var a,n,r,s;if("function"==typeof i){for(a=[],r=[],s=0;s<t.data.ids.length;s++)n=wp.media.model.Attachment.get(t.data.ids[s]),r.push(n.fetch()),a.push(n);e.when.apply(e,r).done(function(){i(a)})}}).fail(function(t){e(".media-modal-close").click(),window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(t)}).always(function(){e(".media-modal").removeClass("processing-media")})}
var n,r=wp.media,s=ajaxurl.replace(/admin\-ajax\.php/,"images/wpspin_light.gif");r.controller.VcCssSingleImage=r.controller.VcSingleImage.extend({setCssEditor:function(e){return e&&(this._css_editor=e),this},updateSelection:function(){var e,t=this.get("selection"),i=this._css_editor.getBackgroundImage();"undefined"!=typeof i&&""!==i&&-1!==i&&(e=_.map(i.toString().split(/,/),function(e){var t=wp.media.model.Attachment.get(e);return t.fetch(),t})),t.reset(e)}});var c;c=vc.CssEditor=Backbone.View.extend({attrs:{},layouts:["margin","border-width","padding"],positions:["top","right","bottom","left"],$field:!1,simplify:!1,$simplify:!1,events:{"click .vc_icon-remove":"removeImage","click .vc_add-image":"addBackgroundImage","change .vc_simplify":"changeSimplify"},initialize:function(){_.bindAll(this,"setSimplify")},render:function(e){return this.attrs={},this.$simplify=this.$el.find(".vc_simplify"),_.isString(e)&&this.parse(e),this},parse:function(e){var t=e.split(/\s*(\.[^\{]+)\s*\{\s*([^\}]+)\s*\}\s*/g);t[2]&&this.parseAtts(t[2].replace(/\s+!important/g,""))},addBackgroundImage:function(e){return e.preventDefault(),window.vc_selectedFilters={},this.image_media?this.image_media.open("vc_editor"):(this.image_media=r({state:"vc_single-image",states:[(new r.controller.VcCssSingleImage).setCssEditor(this)]}),this.image_media.on("toolbar:create:vc_single-image",function(e){this.createSelectToolbar(e,{text:window.i18nLocale.set_image})},this.image_media),this.image_media.state("vc_single-image").on("select",this.setBgImage),void this.image_media.open("vc_editor"))},setBgImage:function(){var e=this.get("selection");i(e,this)},setCurrentBgImage:function(t){var i,a,n=/([^\?]+)(\?id=\d+){0,1}/,r="",c="";t.match(/^\d+$/)?(a=vc.template(e("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(a({url:s,id:t,css_class:"vc_preview"})),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:t,size:"full",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){this.$el.find(".vc_ce-image").attr("src",e+"?id="+t).removeClass("vc_preview")})):t.match(n)&&(i=t.split(n),r=i[1],i[2]&&(c=i[2].replace(/[^\d]+/,"")),a=vc.template(e("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(a({url:r,id:c})))},changeSimplify:function(){var e=_.debounce(this.setSimplify,100);e&&e()},setSimplify:function(){this.simplifiedMode(this.$simplify[0].checked)},simplifiedMode:function(t){t?(this.simplify=!0,this.$el.addClass("vc_simplified")):(this.simplify=!1,this.$el.removeClass("vc_simplified"),_.each(this.layouts,function(t){"border-width"===t&&(t="border");var i=e("[data-attribute="+t+"].vc_top");this.$el.find("[data-attribute="+t+"]:not(.vc_top)").val(i.val())},this))},removeImage:function(t){var i=e(t.currentTarget);t.preventDefault(),i.parent().remove()},getBackgroundImage:function(){return this.$el.find(".vc_ce-image").data("imageId")},parseAtts:function(e){var t,i,a;t=/(\d+\S*)\s+(\w+)\s+([\d\w#\(,]+)/,i=/^([^\s]+)\s+url\(([^\)]+)\)([\d\w]+\s+[\d\w]+)?$/,a=!1,_.map(e.split(";"),function(e){var n,r,s,c=e.split(/:\s/),o=c[1]||"",d=c[0]||"";o&&(o=o.trim()),d.match(new RegExp("^("+this.layouts.join("|").replace("-","\\-")+")$"))&&o?(n=o.split(/\s+/g),1===n.length?n=[n[0],n[0],n[0],n[0]]:2===n.length?(n[2]=n[0],n[3]=n[1]):3===n.length&&(n[3]=n[1]),_.each(this.positions,function(e,t){this.$el.find("[data-name="+d+"-"+e+"]").val(n[t])},this)):"background-size"===d?(a=o,this.$el.find("[name=background_style]").val(o)):"background-repeat"!==d||a?"background-image"===d?this.setCurrentBgImage(o.replace(/url\(([^\)]+)\)/,"$1")):"background"===d&&o?(s=o.split(i),s[1]&&this.$el.find("[name="+d+"_color]").val(s[1]),s[2]&&this.setCurrentBgImage(s[2])):"border"===d&&o&&o.match(t)?(r=o.split(t),n=[r[1],r[1],r[1],r[1]],_.each(this.positions,function(e,t){this.$el.find("[name="+d+"_"+e+"_width]").val(n[t])},this),this.$el.find("[name=border_style]").val(r[2]),this.$el.find("[name=border_color]").val(r[3]).trigger("change")):-1!=d.indexOf("border")&&o?-1!=d.indexOf("style")?this.$el.find("[name=border_style]").val(o):-1!=d.indexOf("color")?this.$el.find("[name=border_color]").val(o).trigger("change"):-1!=d.indexOf("radius")?this.$el.find("[name=border_radius]").val(o):d.match(/^[\w\-\d]+$/)&&this.$el.find("[name="+d.replace(/\-+/g,"_")+"]").val(o):d.match(/^[\w\-\d]+$/)&&o&&this.$el.find("[name="+d.replace(/\-+/g,"_")+"]").val(o):this.$el.find("[name=background_style]").val(o)},this)},save:function(){var e="";return this.attrs={},_.each(this.layouts,function(e){this.getFields(e)},this),this.getBackground(),this.getBorder(),_.isEmpty(this.attrs)||(e=".vc_custom_"+Date.now()+"{"+_.reduce(this.attrs,function(e,t,i){return t?e+i+": "+t+" !important;":e},"",this)+"}"),e&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(e),e},getBackgroundImageSrc:function(){return this.$el.find(".vc_background-image img").attr("src")},getBackgroundColor:function(){return this.$el.find("[name=background_color]").val()},getBackgroundStyle:function(){return this.$el.find("[name=background_style]").val()},getBackground:function(){var e=this.getBackgroundColor(),t=this.getBackgroundImageSrc(),i=this.getBackgroundStyle();e&&t?this.attrs.background=e+" url("+t+")":e?this.attrs["background-color"]=e:t&&(this.attrs["background-image"]="url("+t+")"),i.match(/repeat/)?(this.attrs["background-position"]="0 0",this.attrs["background-repeat"]=i):i.match(/cover|contain/)&&(this.attrs["background-position"]="center",this.attrs["background-repeat"]="no-repeat",this.attrs["background-size"]=i),e.match(/^rgba/)&&(this.attrs["*background-color"]=e.replace(/\s+/,"").replace(/(rgb)a\((\d+)\,(\d+),(\d+),[^\)]+\)/,"$1($2,$3,$4)"))},getBorder:function(){var e=this.$el.find("[name=border_style]").val(),t=this.$el.find("[name=border_radius]").val(),i=this.$el.find("[name=border_color]").val(),a=["left","right","top","bottom"];e&&i&&this.attrs["border-width"]&&this.attrs["border-width"].match(/^\d+\S+$/)?(this.attrs.border=this.attrs["border-width"]+" "+e+" "+i,this.attrs["border-width"]=void 0,t&&(this.attrs["border-radius"]=t)):(_.each(a,function(t){this.attrs["border-"+t+"-width"]&&(i&&(this.attrs["border-"+t+"-color"]=i),e&&(this.attrs["border-"+t+"-style"]=e))},this),t&&(this.attrs["border-radius"]=t))},getFields:function(e){var t=[];return this.simplify?this.getSimplifiedField(e):(_.each(this.positions,function(i){var a=this.$el.find("[data-name="+e+"-"+i+"]").val().replace(/\s+/,"");a.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(a=isNaN(parseFloat(a))?"":""+parseFloat(a)+"px"),a.length&&t.push({name:i,val:a})},this),void _.each(t,function(t){var i="border-width"===e?"border-"+t.name+"-width":e+"-"+t.name;this.attrs[i]=t.val},this))},getSimplifiedField:function(e){var t="top",i=this.$el.find("[data-name="+e+"-"+t+"]").val().replace(/\s+/,"");i.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(i=isNaN(parseFloat(i))?"":""+parseFloat(i)+"px"),i.length&&(this.attrs[e]=i)}}),vc.atts.css_editor={parse:function(e){var t,i,a;return t=this.content().find('input.wpb_vc_param_value[name="'+e.param_name+'"]'),i=t.data("vcFieldManager"),a=i.save(),a&&vc.edit_form_callbacks.push(n),a},init:function(i,a){e("[data-css-editor=true]",this.content()).each(function(){var a=e(this),n=a.find('input.wpb_vc_param_value[name="'+i.param_name+'"]'),r=n.val();r||(r=t()),n.data("vcFieldManager",new c({el:a}).render(r))}),vc.atts.colorpicker.init.call(this,i,a)}},n=function(){this.params=_.omit(this.params,"bg_color","padding","margin_bottom","bg_image")}}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};if(function(e){var t=Backbone.View.extend({events:{change:"setParams"},setParams:function(){var e,t=this.save(),i=this.$el.find('[value="'+t+'"]'),a=vc.edit_element_block_view.content(),n=this.$el;if(i.length){e=i.data("params");var r=[];_.each(e,function(e,t,i){var n,s=a.find("[name="+t+"].wpb_vc_param_value");s.length&&(s.unbind("change.vcParamsPreset"),n=s.data("vcFieldManager"),n&&n.render&&n.render(e),r.push(s),s.val(e).trigger("change"))}),_.each(r,function(e,t){e.bind("change.vcParamsPreset",function(e){_.isUndefined(e.extra_type)&&n.val("")})})}},render:function(){return this.setParams(),this},save:function(){return this.$el.val()}});vc.atts.params_preset={parse:function(t){return e("select[name="+t.param_name+"]",this.content()).val()},init:function(i,a){e(".vc_params-preset-select",a).each(function(){var i=e(this);_.isUndefined(i.data("fieldManager"))&&i.data("fieldManager",new t({el:i}).render())})}}}(window.jQuery),function(e){function t(){e(".gallery_widget_attached_images_list",this.$view).unbind("click.removeImage").on("click.removeImage","a.vc_icon-remove",function(t){t.preventDefault();var i=e(this).closest(".edit_form_line");e(this).parent().remove();var a=[];i.find(".added img").each(function(){a.push(e(this).attr("rel"))}),i.find(".gallery_widget_attached_images_ids").val(a.join(",")).trigger("change")}),e(".gallery_widget_attached_images_list").each(function(t){var i=e(this);i.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-gallery",cursor:"move",items:"li",update:function(){var t=[];e(this).find(".added img").each(function(){t.push(e(this).attr("rel"))}),i.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val(t.join(",")).trigger("change")}})})}
new t;var i=e("#vc_edit-form-tabs");i.length&&(e(".wpb-edit-form").addClass("vc_with-tabs"),i.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),i.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),i.find(".vc_edit-form-link").click(function(t){var a=e(this);t.preventDefault(),i.find(".vc_active").removeClass("vc_active"),a.parent().addClass("vc_active");var n=e(a.attr("href")).addClass("vc_active");n.parents(".vc_panel-body").scrollTop(0)}))}(window.jQuery),_.isUndefined(window.vc))var vc={atts:{}};!function(e){"use strict";vc.atts.vc_grid_item={init:function(t,i){!0===vc_user_access().getState("grid_builder")||null===vc_user_access().getState("grid_builder")?this.content().find('[data-vc-shortcode-param-name="'+t.param_name+'"] [data-vc-grid-element="value"]').change(function(){var i=e(this).val(),a=e(this).find("[value="+i+"]").data("vcLink");i&&e(this).parents('[data-vc-shortcode-param-name="'+t.param_name+'"]:first').find('[data-vc-grid-item="edit_link"]').attr("href",a)}).trigger("change"):this.content().find('[data-vc-shortcode-param-name="'+t.param_name+'"] .vc_description').remove()},parse:function(e){var t=this.content().find('[data-vc-shortcode-param-name="'+e.param_name+'"] [data-vc-grid-element="value"]');return t.length?t.val():""}}}(window.jQuery);